CREATE DATABASE poe_data;


# SETUP SUB-TYPE TABLES

CREATE TABLE weapon_types(
	id SERIAL PRIMARY KEY NOT NULL,
	type CHAR VARYING(50) NOT NULL UNIQUE
	);
	
CREATE TABLE clothing_types(
	id SERIAL PRIMARY KEY NOT NULL,
	type CHAR VARYING(50) NOT NULL UNIQUE
	);
	
CREATE TABLE jewelry_types(
	id SERIAL PRIMARY KEY NOT NULL,
	type CHAR VARYING(50) NOT NULL UNIQUE
	);
	
CREATE TABLE prefix_types(
	id SERIAL PRIMARY KEY NOT NULL,
	type CHAR VARYING(50) NOT NULL UNIQUE
	);
	
CREATE TABLE suffix_types(
	id SERIAL PRIMARY KEY NOT NULL,
	type CHAR VARYING(50) NOT NULL UNIQUE
	);
	
CREATE TABLE stat_names(
	id serial PRIMARY KEY NOT NULL,
	name CHAR VARYING(60) NOT NULL UNIQUE
	);
	
CREATE TABLE stats(
	id SERIAL PRIMARY KEY NOT NULL,
	name_id INT NOT NULL,
	min_value INT NOT NULL,
	max_value INT NOT NULL
	);
	
CREATE TABLE prefix_names(
	id SERIAL PRIMARY KEY NOT NULL,
	name CHAR VARYING(50) UNIQUE NOT NULL
	);

CREATE TABLE prefixes(
	id SERIAL PRIMARY KEY NOT NULL,
	type_id INT NOT NULL,
	name_id INT NOT NULL,
	i_level INT NOT NULL,
	crafted boolean NOT NULL,
	stat INT NOT NULL,
	unique (type_id, name_id, i_level, crafted, stat)
	);

CREATE TABLE suffix_names(
	id SERIAL PRIMARY KEY NOT NULL,
	name CHAR VARYING(50) UNIQUE NOT NULL
	);

CREATE TABLE suffixes(
	id SERIAL PRIMARY KEY NOT NULL,
	type_id INT NOT NULL,
	name_id INT NOT NULL,
	i_level INT NOT NULL,
	crafted boolean NOT NULL,
	stat INT NOT NULL,
	unique (type_id, name_id, i_level, crafted, stat)
	);
	
DROP TABLE weapon_types;
DROP TABLE clothing_types;
DROP TABLE jewelry_types;
DROP TABLE prefix_types;
DROP TABLE suffix_types;
DROP TABLE stat_names;
DROP TABLE stats;
DROP TABLE prefix_names;
DROP TABLE prefixes;
DROP TABLE suffix_names;
DROP TABLE suffixes;

############################################
############################################
############################################
############################################

implicit_mod_values_1_min': '16', 'level': '78', 'name': "Hummingbird's", 'implicit_mod_key_1': 'Base Stun Recovery +%', 'implicit_mod_key_0': 'Local Evasion And Energy Shield +%', 'implicit_mod_values_1_max': '17'}

# implicit
id SERIAL PRIMARY KEY NOT NULL
master_crafted BOOL NOT NULL
level INT NOT NULL
name CHAR VARYING(50) NOT NULL UNIQUE

# stat

id SERIAL PRIMARY KEY NMOT NULL
description CHAR VARYING(50) NOT NULL
min INT
max INT

